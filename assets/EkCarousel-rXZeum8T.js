var H=Object.defineProperty;var C=i=>{throw TypeError(i)};var O=(i,o,t)=>o in i?H(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t;var k=(i,o,t)=>O(i,typeof o!="symbol"?o+"":o,t),T=(i,o,t)=>o.has(i)||C("Cannot "+t);var a=(i,o,t)=>(T(i,o,"read from private field"),t?t.call(i):o.get(i)),f=(i,o,t)=>o.has(i)?C("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(i):o.set(i,t),m=(i,o,t,n)=>(T(i,o,"write to private field"),n?n.call(i,t):o.set(i,t),t),N=(i,o,t)=>(T(i,o,"access private method"),t);import{l as D}from"./EkIcon-Bitc-VNF.js";var u,y,l,p,E,g,A,d,S,w,z;const e=class e extends HTMLElement{constructor(){super();f(this,d);f(this,u,0);f(this,y,0);f(this,l,[]);f(this,p,10);f(this,E,!1);f(this,g,t=>{var r,s;const n=(r=this.shadowRoot.querySelector("slot"))==null?void 0:r.assignedElements();if(n!=null&&n.length){if(t>0)if(n.length-(a(this,u)+a(this,y))<a(this,y)){let h=0;for(let v=n.length-1;v>=0;v--)if(h+=a(this,l)[v],h>((s=this.shadowRoot.querySelector(".carousel-inner"))==null?void 0:s.offsetWidth)){m(this,u,Math.max(0,v+1));break}}else m(this,u,a(this,u)+a(this,y));else m(this,u,Math.max(0,a(this,u)-a(this,y)));N(this,d,w).call(this)}});f(this,A,()=>{const t=this.shadowRoot.querySelector(".carousel-inner");if(!t)return;let n=0,r=0;t.addEventListener("touchstart",s=>{n=s.touches[0].clientX,r=s.touches[0].clientY,m(this,E,!1)},{passive:!0}),t.addEventListener("touchmove",s=>{if(!a(this,E)){const[c,h]=[Math.abs(s.touches[0].clientX-n),Math.abs(s.touches[0].clientY-r)];c>h&&c>10&&(m(this,E,!0),s.preventDefault())}},{passive:!1}),t.addEventListener("touchend",s=>{if(a(this,E)&&Math.abs(s.changedTouches[0].clientX-n)>=50){const c=n>s.changedTouches[0].clientX?e.NAV.NEXT.direction:e.NAV.PREV.direction;a(this,g).call(this,c)}},{passive:!0})});this.attachShadow({mode:"open"})}connectedCallback(){N(this,d,z).call(this);let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>N(this,d,S).call(this),200)})}attributeChangedCallback(t,n,r){n===r||!this.isConnected||N(this,d,w).call(this)}};u=new WeakMap,y=new WeakMap,l=new WeakMap,p=new WeakMap,E=new WeakMap,g=new WeakMap,A=new WeakMap,d=new WeakSet,S=function(){var h;const t=(h=this.shadowRoot.querySelector("slot"))==null?void 0:h.assignedElements(),n=this.shadowRoot.querySelector(".carousel-inner");if(!(t!=null&&t.length)||!n)return;m(this,l,t.map(v=>v.offsetWidth+a(this,p))),a(this,l)[a(this,l).length-1]-=a(this,p);const r=n.offsetWidth;let s=0,c=0;for(const v of a(this,l)){if(s+=v,s>r)break;c++}m(this,y,c),N(this,d,w).call(this)},w=function(){var q,$,P,x,W,M,I,Y;const[t,n]=[this.shadowRoot.querySelector("slot"),this.shadowRoot.querySelector(".carousel-inner")];if(!t||!n||!a(this,l).length)return;const r={[e.NAV.PREV.key]:{button:this.shadowRoot.querySelector(`[data-nav="${e.NAV.PREV.key}"]`),wrapper:(q=this.shadowRoot.querySelector(`[data-nav="${e.NAV.PREV.key}"]`))==null?void 0:q.parentElement},[e.NAV.NEXT.key]:{button:this.shadowRoot.querySelector(`[data-nav="${e.NAV.NEXT.key}"]`),wrapper:($=this.shadowRoot.querySelector(`[data-nav="${e.NAV.NEXT.key}"]`))==null?void 0:$.parentElement}},[s,c]=[a(this,l).reduce((b,V)=>b+V,0),n.offsetWidth];if(s<=c){const b=this.getAttribute("align")||"left",V=b==="right"?-(s-c):b==="center"?-(s-c)/2:0;t.style.transform=`translateX(${V}px)`,m(this,u,0),Object.values(r).forEach(({button:R,wrapper:X})=>{R==null||R.classList.remove("visible"),X==null||X.classList.remove("visible")});return}const h=-a(this,l).slice(0,a(this,u)).reduce((b,V)=>b+V,0);s+h<=c+1?((P=r[e.NAV.NEXT.key].button)==null||P.classList.remove("visible"),(x=r[e.NAV.NEXT.key].wrapper)==null||x.classList.remove("visible"),t.style.transform=`translateX(${-(s-c)}px)`):((W=r[e.NAV.NEXT.key].button)==null||W.classList.add("visible"),(M=r[e.NAV.NEXT.key].wrapper)==null||M.classList.add("visible"),t.style.transform=`translateX(${h}px)`);const L=h<0;(I=r[e.NAV.PREV.key].button)==null||I.classList.toggle("visible",L),(Y=r[e.NAV.PREV.key].wrapper)==null||Y.classList.toggle("visible",L)},z=function(){const t=`
      <div class="carousel">
        <div class="nav-button-wrapper">
          <ek-button data-nav="${e.NAV.PREV.key}" icon="${e.NAV.PREV.icon}" icon-only variant="secondary"></ek-button>
        </div>
        <div class="carousel-inner"><slot></slot></div>
        <div class="nav-button-wrapper">
          <ek-button data-nav="${e.NAV.NEXT.key}" icon="${e.NAV.NEXT.icon}" icon-only variant="secondary"></ek-button>
        </div>
      </div>
    `;this.shadowRoot.innerHTML=D(import.meta.url,e.elemName)+t,Object.values(e.NAV).forEach(({key:n,direction:r})=>{var s;(s=this.shadowRoot.querySelector(`[data-nav="${n}"]`))==null||s.addEventListener("click",()=>a(this,g).call(this,r))}),a(this,A).call(this),requestAnimationFrame(()=>N(this,d,S).call(this))},k(e,"elemName","ek-carousel"),k(e,"observedAttributes",["align"]),k(e,"NAV",{PREV:{key:"prev",icon:"chevron-left",direction:-1},NEXT:{key:"next",icon:"chevron-right",direction:1}});let j=e;export{j as E};
