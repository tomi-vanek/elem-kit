var nt=Object.defineProperty;var tt=i=>{throw TypeError(i)};var ot=(i,n,t)=>n in i?nt(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t;var f=(i,n,t)=>ot(i,typeof n!="symbol"?n+"":n,t),W=(i,n,t)=>n.has(i)||tt("Cannot "+t);var a=(i,n,t)=>(W(i,n,"read from private field"),t?t.call(i):n.get(i)),h=(i,n,t)=>n.has(i)?tt("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(i):n.set(i,t),v=(i,n,t,e)=>(W(i,n,"write to private field"),e?e.call(i,t):n.set(i,t),t),d=(i,n,t)=>(W(i,n,"access private method"),t);function at(i,n){return i?`${i.substring(0,i.lastIndexOf("/")+1)}${n}.css`:`scripts/elem-kit/${n}/${n}.css`}function rt(i){return`${i.substring(0,i.lastIndexOf("/")+1)}../ek-styles/ek-base.css`}function z(i,n){const t=rt(i),e=at(i,n);return`
    <link rel="stylesheet" href="${t}"> 
    <link rel="stylesheet" href="${e}">
  `}var N,et,O;const S=class S extends HTMLElement{constructor(){super();h(this,N);this.attachShadow({mode:"open"})}connectedCallback(){d(this,N,O).call(this)}attributeChangedCallback(t,e,s){e!==s&&this.isConnected&&d(this,N,O).call(this)}};N=new WeakSet,et=async function(t){const e=localStorage.getItem(`icon-${t}`);if(e)return e;try{const s=await fetch(`node_modules/bootstrap-icons/icons/${t}.svg`);if(!s.ok)throw new Error(`Icon ${t} not found`);const o=await s.text();return localStorage.setItem(`icon-${t}`,o),o}catch(s){return console.error("Error loading icon:",s),null}},O=async function(){const t=this.getAttribute("name");if(!t)return;this.shadowRoot.innerHTML=`${z(import.meta.url,S.elemName)}<div class="icon-container">Loading...</div>`;const[e,s]=[await d(this,N,et).call(this,t),this.shadowRoot.querySelector(".icon-container")];s&&e&&(s.innerHTML=e)},f(S,"elemName","ek-icon"),f(S,"observedAttributes",["name","size"]);let E=S;customElements.get(E.elemName)||customElements.define(E.elemName,E);var q,V,Y;const T=class T extends HTMLElement{constructor(){super();h(this,V);h(this,q,t=>{if(t.preventDefault(),t.stopPropagation(),this.disabled||this.loading)return;const e=this.getAttribute("onclick");e&&new Function(e)(),this.dispatchEvent(new Event("click",{bubbles:!0,composed:!0,cancelable:!0}))});this.attachShadow({mode:"open"})}get disabled(){return this.hasAttribute("disabled")}set disabled(t){this.toggleAttribute("disabled",t)}get loading(){return this.hasAttribute("loading")}set loading(t){this.toggleAttribute("loading",t)}get iconOnly(){return this.hasAttribute("icon-only")}set iconOnly(t){this.toggleAttribute("icon-only",t)}connectedCallback(){d(this,V,Y).call(this)}attributeChangedCallback(t,e,s){var o;e===s||!this.isConnected||(t==="icon"&&e&&s?(o=this.shadowRoot.querySelector("ek-icon"))==null||o.setAttribute("name",s):d(this,V,Y).call(this))}};q=new WeakMap,V=new WeakSet,Y=function(){var l;const t=this.getAttribute("icon"),e=this.getAttribute("size"),s=t?`<ek-icon name="${t}" size="${e}"></ek-icon>`:"",o=this.iconOnly?"":"<slot></slot>",c=`
      <button ${this.disabled?"disabled":""}>
        ${s}
        ${o}
        ${this.loading?`<ek-icon name="arrow-clockwise" size="${e}"></ek-icon>`:""}
      </button>
    `;this.shadowRoot.innerHTML=z(import.meta.url,T.elemName)+c,(l=this.shadowRoot.querySelector("button"))==null||l.addEventListener("click",a(this,q))},f(T,"elemName","ek-button"),f(T,"observedAttributes",["variant","size","icon","icon-position","loading","disabled","onclick","icon-only"]);let A=T;customElements.get(A.elemName)||customElements.define(A.elemName,A);var x,P,st;const M=class M extends HTMLElement{constructor(){super();h(this,P);h(this,x,t=>{var e;t.preventDefault(),t.stopPropagation(),this.isDark=!this.isDark,(e=this.shadowRoot.querySelector("ek-button"))==null||e.setAttribute("icon",this.isDark?"sun":"moon")});this.attachShadow({mode:"open"})}get isDark(){return this.getAttribute("theme")==="dark"}set isDark(t){const e=t?"dark":"light";this.setAttribute("theme",e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark-theme",t)}connectedCallback(){const t=localStorage.getItem("theme");this.isDark=t!==null?t==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches,d(this,P,st).call(this)}};x=new WeakMap,P=new WeakSet,st=function(){var e;const t=`<ek-button icon="${this.isDark?"sun":"moon"}" icon-only variant="text" size="small"></ek-button>`;this.shadowRoot.innerHTML=z(import.meta.url,M.elemName)+t,(e=this.shadowRoot.querySelector("ek-button"))==null||e.addEventListener("click",a(this,x))},f(M,"elemName","ek-dark-light");let $=M;customElements.get($.elemName)||customElements.define($.elemName,$);var b,k,u,L,y,C,I,m,F,X,it;const r=class r extends HTMLElement{constructor(){super();h(this,m);h(this,b,0);h(this,k,0);h(this,u,[]);h(this,L,10);h(this,y,!1);h(this,C,t=>{var s,o;const e=(s=this.shadowRoot.querySelector("slot"))==null?void 0:s.assignedElements();if(e!=null&&e.length){if(t>0)if(e.length-(a(this,b)+a(this,k))<a(this,k)){let l=0;for(let g=e.length-1;g>=0;g--)if(l+=a(this,u)[g],l>((o=this.shadowRoot.querySelector(".carousel-inner"))==null?void 0:o.offsetWidth)){v(this,b,Math.max(0,g+1));break}}else v(this,b,a(this,b)+a(this,k));else v(this,b,Math.max(0,a(this,b)-a(this,k)));d(this,m,X).call(this)}});h(this,I,()=>{const t=this.shadowRoot.querySelector(".carousel-inner");if(!t)return;let e=0,s=0;t.addEventListener("touchstart",o=>{e=o.touches[0].clientX,s=o.touches[0].clientY,v(this,y,!1)},{passive:!0}),t.addEventListener("touchmove",o=>{if(!a(this,y)){const[c,l]=[Math.abs(o.touches[0].clientX-e),Math.abs(o.touches[0].clientY-s)];c>l&&c>10&&(v(this,y,!0),o.preventDefault())}},{passive:!1}),t.addEventListener("touchend",o=>{if(a(this,y)&&Math.abs(o.changedTouches[0].clientX-e)>=50){const c=e>o.changedTouches[0].clientX?r.NAV.NEXT.direction:r.NAV.PREV.direction;a(this,C).call(this,c)}},{passive:!0})});this.attachShadow({mode:"open"})}connectedCallback(){d(this,m,it).call(this);let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>d(this,m,F).call(this),200)})}attributeChangedCallback(t,e,s){e===s||!this.isConnected||d(this,m,X).call(this)}};b=new WeakMap,k=new WeakMap,u=new WeakMap,L=new WeakMap,y=new WeakMap,C=new WeakMap,I=new WeakMap,m=new WeakSet,F=function(){var l;const t=(l=this.shadowRoot.querySelector("slot"))==null?void 0:l.assignedElements(),e=this.shadowRoot.querySelector(".carousel-inner");if(!(t!=null&&t.length)||!e)return;v(this,u,t.map(g=>g.offsetWidth+a(this,L))),a(this,u)[a(this,u).length-1]-=a(this,L);const s=e.offsetWidth;let o=0,c=0;for(const g of a(this,u)){if(o+=g,o>s)break;c++}v(this,k,c),d(this,m,X).call(this)},X=function(){var Z,G,J,K,Q,B,U,_;const[t,e]=[this.shadowRoot.querySelector("slot"),this.shadowRoot.querySelector(".carousel-inner")];if(!t||!e||!a(this,u).length)return;const s={[r.NAV.PREV.key]:{button:this.shadowRoot.querySelector(`[data-nav="${r.NAV.PREV.key}"]`),wrapper:(Z=this.shadowRoot.querySelector(`[data-nav="${r.NAV.PREV.key}"]`))==null?void 0:Z.parentElement},[r.NAV.NEXT.key]:{button:this.shadowRoot.querySelector(`[data-nav="${r.NAV.NEXT.key}"]`),wrapper:(G=this.shadowRoot.querySelector(`[data-nav="${r.NAV.NEXT.key}"]`))==null?void 0:G.parentElement}},[o,c]=[a(this,u).reduce((p,w)=>p+w,0),e.offsetWidth];if(o<=c){const p=this.getAttribute("align")||"left",w=p==="right"?-(o-c):p==="center"?-(o-c)/2:0;t.style.transform=`translateX(${w}px)`,v(this,b,0),Object.values(s).forEach(({button:D,wrapper:H})=>{D==null||D.classList.remove("visible"),H==null||H.classList.remove("visible")});return}const l=-a(this,u).slice(0,a(this,b)).reduce((p,w)=>p+w,0);o+l<=c+1?((J=s[r.NAV.NEXT.key].button)==null||J.classList.remove("visible"),(K=s[r.NAV.NEXT.key].wrapper)==null||K.classList.remove("visible"),t.style.transform=`translateX(${-(o-c)}px)`):((Q=s[r.NAV.NEXT.key].button)==null||Q.classList.add("visible"),(B=s[r.NAV.NEXT.key].wrapper)==null||B.classList.add("visible"),t.style.transform=`translateX(${l}px)`);const j=l<0;(U=s[r.NAV.PREV.key].button)==null||U.classList.toggle("visible",j),(_=s[r.NAV.PREV.key].wrapper)==null||_.classList.toggle("visible",j)},it=function(){const t=`
      <div class="carousel">
        <div class="nav-button-wrapper">
          <ek-button data-nav="${r.NAV.PREV.key}" icon="${r.NAV.PREV.icon}" icon-only variant="secondary"></ek-button>
        </div>
        <div class="carousel-inner"><slot></slot></div>
        <div class="nav-button-wrapper">
          <ek-button data-nav="${r.NAV.NEXT.key}" icon="${r.NAV.NEXT.icon}" icon-only variant="secondary"></ek-button>
        </div>
      </div>
    `;this.shadowRoot.innerHTML=z(import.meta.url,r.elemName)+t,Object.values(r.NAV).forEach(({key:e,direction:s})=>{var o;(o=this.shadowRoot.querySelector(`[data-nav="${e}"]`))==null||o.addEventListener("click",()=>a(this,C).call(this,s))}),a(this,I).call(this),requestAnimationFrame(()=>d(this,m,F).call(this))},f(r,"elemName","ek-carousel"),f(r,"observedAttributes",["align"]),f(r,"NAV",{PREV:{key:"prev",icon:"chevron-left",direction:-1},NEXT:{key:"next",icon:"chevron-right",direction:1}});let R=r;customElements.get(R.elemName)||customElements.define(R.elemName,R);const lt={parameters:{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}}};export{lt as default};
